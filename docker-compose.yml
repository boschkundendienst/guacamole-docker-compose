###########################
#   Username: guacadmin   #
#   Password: guacadmin   #
###########################
version: '2.0'
services:
###########################
#
#
##########################################################
  CN_Guacamole_GuaCd:
    # -------------------------------------------------- #
    container_name: 'CN_Guacamole_GuaCd'
    image: 'guacamole/guacd'
    # -------------------------------------------------- #
    network_mode: 'bridge'
    # -------------------------------------------------- #
    volumes:
    - 'CN_Guacamole_GuaCd_Drive:/drive:rw'
    - 'CN_Guacamole_GuaCd_Record:/record:rw'
##########################################################
#
#
##########################################################
  CN_Guacamole_PostgreSQL:
    # -------------------------------------------------- #
    container_name: 'CN_Guacamole_PostgreSQL'
    image: 'postgres:13.4'
    restart: 'always'
    # -------------------------------------------------- #
    network_mode: 'bridge'
    # -------------------------------------------------- #
    environment:
      PGDATA: '/var/lib/postgresql/data/guacamole'
      POSTGRES_DB: 'CN_PostgreSQL'
      POSTGRES_PASSWORD: 'Ganon+Stop-2'
      POSTGRES_USER: 'guacamole_user'
    # -------------------------------------------------- #
    volumes:
    - 'CN_Guacamole_PostgreSQL_Init:/docker-entrypoint-initdb.d:ro'
    - 'CN_Guacamole_PostgreSQL_Data:/var/lib/postgresql/data:rw'
##########################################################
#
#
##########################################################
  CN_Guacamole_WebSite:
    # -------------------------------------------------- #
    container_name: 'CN_Guacamole_WebSite'
    image: 'guacamole/guacamole'
    restart: 'always'
    # -------------------------------------------------- #
    network_mode: 'bridge'
    # -------------------------------------------------- #
    links:
    - 'CN_Guacamole_GuaCd'
    # -------------------------------------------------- #
    depends_on:
    - 'CN_Guacamole_GuaCd'
    - 'CN_Guacamole_PostgreSQL'
    # -------------------------------------------------- #
    environment:
      GUACD_HOSTNAME: 'CN_Guacamole_GuaCd'
      POSTGRES_DATABASE: 'guacamole_db'
      POSTGRES_HOSTNAME: 'CN_Guacamole_PostgreSQL'
      POSTGRES_PASSWORD: 'Ganon+Stop-2'
      POSTGRES_USER: 'guacamole_user'
    # -------------------------------------------------- #
    ports:
    - '8586:8080/tcp'
##########################################################
#
#
##########################################################
# DÃ©claration des volumes #
###########################
volumes:
 # ---------------- #
 CN_Guacamole_GuaCd_Drive:
  external: 'false'
 # ---------------- #
 CN_Guacamole_GuaCd_Record:
  external: 'false'
 # ---------------- #
 CN_Guacamole_PostgreSQL_Init:
  external: 'false'
 # ---------------- #
 CN_Guacamole_PostgreSQL_Data:
  external: 'false'
 # ---------------- #
